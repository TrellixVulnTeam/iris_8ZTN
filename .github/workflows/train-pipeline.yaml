name: train-pipeline

on: [push]

jobs:
  run:
    runs-on: [ubuntu-latest]
    # optionally use a convenient Ubuntu LTS + CUDA + DVC + CML image
    container: docker://dvcorg/cml-py3:latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
        
      - name: Train Model
        env: 
          repo_token: $(( secrets.GITHUB_TOKEN ))
        run: |
         pip3 install -r requirements.txt
         python3 train.py

      - name: Write CML Report
        run: |
         echo "MODEL METRICS"
       #  cat metrics.txt
      
      #     # Post reports as comments in GitHub PRs
      #     echo "MODEL METRICS"
      #     cat metrics.txt >> report.md
      #     cml-send-comment report.md
